{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./_dev/js/payment_bt.js"],"names":["$","document","ready","hasClass","initBraintreeCard","bt_hosted_fileds","bt_client_instance","braintree","client","create","authorization","clientErr","clientInstance","show","text","bt_translations","hostedFields","styles","fields","number","selector","placeholder","card_nmb","cvv","cvc","expirationDate","date","hostedFieldsErr","hostedFieldsInstance","hosted","on","event","removeClass","cards","length","addClass","type","popup_message","blur_field_info","emittedBy","isEmpty","empty_field","isValid","invalid","hide","BTSubmitPayment","bt_form","querySelector","val","check3DS","threeDSecure","ThreeDSecureerror","code","https","load_3d","verifyCard","amount","bt_amount","nonce","data","addFrame","err","iframe","fancybox","open","autoScale","minHeight","content","outerHTML","removeFrame","three_d_secure_response","request_problem","failed_3d","submit","tokenize","tokenizeErr","payload","empty","details","invalidFieldKeys","token","network","tkn_failed","value","cardType"],"mappings":"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","file":"js/payment_bt.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./_dev/js/payment_bt.js\");\n","/**\n * 2007-2019 PrestaShop\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade PrestaShop to newer\n * versions in the future. If you wish to customize PrestaShop for your\n * needs please refer to http://www.prestashop.com for more information.\n *\n * @author    PrestaShop SA <contact@prestashop.com>\n * @copyright 2007-2019 PrestaShop SA\n * @license   http://addons.prestashop.com/en/content/12-terms-and-conditions-of-use\n * International Registered Trademark & Property of PrestaShop SA\n */\n\n    $(document).ready(function(){\n        if ($('section#checkout-payment-step').hasClass('js-current-step')) {\n            initBraintreeCard();\n        }\n    });\n\n    var bt_hosted_fileds;\n    var bt_client_instance;\n\n    function initBraintreeCard() {\n        braintree.client.create({\n            authorization: authorization\n        }, function (clientErr, clientInstance) {\n            if (clientErr) {\n                $('#bt-card-error-msg').show().text(bt_translations.client);\n                return;\n            }\n\n            braintree.hostedFields.create({\n                client: clientInstance,\n                styles: {\n                    'input': {\n                        'color': '#999999',\n                        'font-size': '14px',\n                        'font-family': 'PayPal Forward, sans-serif'\n                    }\n                },\n                fields: {\n                    number: {\n                        selector: \"#card-number\",\n                        placeholder: bt_translations.card_nmb\n                    },\n                    cvv: {\n                        selector: \"#cvv\",\n                        placeholder: bt_translations.cvc\n                    },\n                    expirationDate: {\n                        selector: \"#expiration-date\",\n                        placeholder: bt_translations.date\n                    }\n                }\n            },function (hostedFieldsErr, hostedFieldsInstance) {\n                if (hostedFieldsErr) {\n                    $('#bt-card-error-msg').show().text(bt_translations.hosted);\n                    return;\n                }\n\n                hostedFieldsInstance.on('empty', function (event) {\n                    $('.braintree-card #card-image').removeClass();\n                });\n\n                hostedFieldsInstance.on('cardTypeChange', function (event) {\n                    // Change card bg depending on card type\n                    if (event.cards.length === 1) {\n                        $('.braintree-card #card-image').removeClass().addClass(event.cards[0].type);\n                    }\n                });\n\n                hostedFieldsInstance.on('blur', function (event) {\n                    var popup_message = '';\n                    var blur_field_info = event.fields[event.emittedBy];\n                    if (blur_field_info.isEmpty) {\n                        popup_message = bt_translations[event.emittedBy]+' '+bt_translations.empty_field;\n                    } else if (!blur_field_info.isValid) {\n                        popup_message = bt_translations.invalid+' '+bt_translations[event.emittedBy];\n                    }\n                    if (popup_message) {\n                        $('#bt-card-error-msg').show().text(popup_message);\n                    } else {\n                        $('#bt-card-error-msg').hide();\n                    }\n                });\n                bt_hosted_fileds = hostedFieldsInstance;\n                bt_client_instance = clientInstance;\n            });\n        });\n    }\n\n    function BTSubmitPayment() {\n        var bt_form = document.querySelector('#braintree-form');\n        // use vaulted card\n        if ($('select[name=bt_vaulting_token]').val()) {\n            if (check3DS) {\n                braintree.threeDSecure.create({\n                    client: bt_client_instance\n                }, function (ThreeDSecureerror,threeDSecure) {\n\n                    if(ThreeDSecureerror)\n                    {\n                        switch (ThreeDSecureerror.code) {\n                            case 'THREEDS_HTTPS_REQUIRED':\n                                popup_message = bt_translations.https;\n                                break;\n                            default:\n                                popup_message = bt_translations.load_3d;\n                        }\n                        $('#bt-card-error-msg').show().text(popup_message);\n                        return false;\n                    }\n                    threeDSecure.verifyCard({\n                        amount: bt_amount,\n                        nonce: $('select[name=bt_vaulting_token] option:checked').data('nonce'),\n                        addFrame: function (err, iframe) {\n                            $.fancybox.open([\n                                {\n                                    type: 'inline',\n                                    autoScale: true,\n                                    minHeight: 30,\n                                    content: '<p class=\"braintree-iframe\">'+iframe.outerHTML+'</p>'\n                                }\n                            ]);\n                        },\n                        removeFrame: function () {\n                        }\n                    }, function (err, three_d_secure_response) {\n                        if (err) {\n                            var popup_message = '';\n                            switch (err.code) {\n                                case 'CLIENT_REQUEST_ERROR':\n                                    popup_message = bt_translations.request_problem;\n                                    break;\n                                default:\n                                    popup_message = bt_translations.failed_3d;\n                            }\n                            $('#bt-card-error-msg').show().text(popup_message);\n                            return false;\n                        }\n                        bt_form.submit()\n                        return;\n\n                    });\n                });\n            } else {\n                bt_form.submit();\n                return;\n            }\n        } else {\n            bt_hosted_fileds.tokenize(function (tokenizeErr, payload) {\n                if (tokenizeErr) {\n                    var popup_message = '';\n                    switch (tokenizeErr.code) {\n                        case 'HOSTED_FIELDS_FIELDS_EMPTY':\n                            popup_message = bt_translations.empty;\n                            break;\n                        case 'HOSTED_FIELDS_FIELDS_INVALID':\n                            popup_message = bt_translations.invalid+tokenizeErr.details.invalidFieldKeys;\n                            break;\n                        case 'HOSTED_FIELDS_FAILED_TOKENIZATION':\n                            popup_message = bt_translations.token;\n                            break;\n                        case 'HOSTED_FIELDS_TOKENIZATION_NETWORK_ERROR':\n                            popup_message = bt_translations.network;\n                            break;\n                        default:\n                            popup_message = bt_translations.tkn_failed;\n                    }\n                    $('#bt-card-error-msg').show().text(popup_message);\n                    return false;\n                }\n                if (check3DS) {\n                    braintree.threeDSecure.create({\n                        client: bt_client_instance\n                    }, function (ThreeDSecureerror,threeDSecure) {\n\n                        if(ThreeDSecureerror)\n                        {\n                            switch (ThreeDSecureerror.code) {\n                                case 'THREEDS_HTTPS_REQUIRED':\n                                    popup_message = bt_translations.https;\n                                    break;\n                                default:\n                                    popup_message = bt_translations.load_3d;\n                            }\n                            $('#bt-card-error-msg').show().text(popup_message);\n                            return false;\n                        }\n                        threeDSecure.verifyCard({\n                            nonce: payload.nonce,\n                            amount: bt_amount,\n                            addFrame: function (err, iframe) {\n                                $.fancybox.open([\n                                    {\n                                        type: 'inline',\n                                        autoScale: true,\n                                        minHeight: 30,\n                                        content: '<p class=\"braintree-iframe\">'+iframe.outerHTML+'</p>'\n                                    }\n                                ]);\n                            },\n                            removeFrame: function () {\n                            }\n                        }, function (err, three_d_secure_response) {\n                            if (err) {\n                                var popup_message = '';\n                                switch (err.code) {\n                                    case 'CLIENT_REQUEST_ERROR':\n                                        popup_message = bt_translations.request_problem;\n                                        break;\n                                    default:\n                                        popup_message = bt_translations.failed_3d;\n                                }\n                                $('#bt-card-error-msg').show().text(popup_message);\n                                return false;\n                            }\n\n                            document.querySelector('#braintree-form #payment_method_nonce').value = three_d_secure_response.nonce;\n                            document.querySelector('#braintree-form #braintree_card_type').value = payload.details.cardType;\n                            bt_form.submit()\n\n                        });\n                    });\n                } else {\n                    document.querySelector('#braintree-form #payment_method_nonce').value = payload.nonce;\n                    bt_form.submit();\n                }\n            });\n        }\n    }\n"],"sourceRoot":""}