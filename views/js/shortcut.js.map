{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./_dev/js/shortcut.js"],"names":["$","document","ready","sourcePage","data","vars","getProductVars","EcCheckProductAvailability","prestashop","on","e","xhr","settings","id_product_attribute","ec_sc_in_context","window","paypalCheckoutReady","paypal","checkout","setup","merchant_id","environment","ec_sc_environment","Object","val","location","href","combination","re","each","serializeArray","key","item","res","name","match","push","value","join","ECSInContext","submit","qty","productId","productIdAttr","ajax","url","sc_init_url","type","success","json","show","hide","initXO","support","cors","ec_sc_action_url","urlPrefix","token","startFlow","closeFlow","replace","redirect_link","error","responseData","alert","statusText"],"mappings":"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","file":"js/shortcut.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./_dev/js/shortcut.js\");\n","/**\n * 2007-2019 PrestaShop\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade PrestaShop to newer\n * versions in the future. If you wish to customize PrestaShop for your\n * needs please refer to http://www.prestashop.com for more information.\n *\n * @author    PrestaShop SA <contact@prestashop.com>\n * @copyright 2007-2019 PrestaShop SA\n * @license   http://addons.prestashop.com/en/content/12-terms-and-conditions-of-use\n * International Registered Trademark & Property of PrestaShop SA\n */\n// init incontext\n$(document).ready( () => {\n\n  let sourcePage = $('[data-container-express-checkout]').data('paypal-source-page');\n  switch (sourcePage) {\n    case 'product':\n    let vars = getProductVars();\n      EcCheckProductAvailability(sourcePage, vars['qty'], vars['id_product'], vars['id_product_attribute']);\n      prestashop.on('updatedProduct', function(e, xhr, settings) {\n          EcCheckProductAvailability(sourcePage, vars['qty'], vars['id_product'], e.id_product_attribute);\n      });\n      break;\n    case 'cart':\n      prestashop.on('updateCart', () => EcCheckProductAvailability(sourcePage));\n      break;\n  }\n  if (typeof ec_sc_in_context !== 'undefined' && ec_sc_in_context) {\n    window.paypalCheckoutReady = () => {\n      paypal.checkout.setup(merchant_id, {\n        environment: ec_sc_environment,\n      });\n    };\n  }\n});\n\nconst getProductVars = () => {\n  let vars = new Object();\n  vars['qty'] = $('input[name=\"qty\"]').val();\n  vars['id_product'] = $('[data-paypal-id-product]').val();\n  vars['id_product_attribute'] = $('[data-paypal-id-product-attribute]').val();\n  return vars;\n}\n\n// Click on shortcut button\n$('[data-paypal-shortcut-btn]').on('click', () => {\n  let sourcePage = $('[data-container-express-checkout]').data('paypal-source-page');\n  $('[data-paypal-url-page]').val(document.location.href);\n  switch (sourcePage) {\n    case 'product':\n      let vars = getProductVars(),\n          combination = [],\n          re = /group\\[([0-9]+)\\]/;\n      $('[data-paypal-qty]').val(vars['qty']);\n      $.each($('#add-to-cart-or-refresh').serializeArray(), (key, item) => {\n        if(res = item.name.match(re)) {\n          combination.push(`${res[1]} : ${item.value}`);\n        }\n      });\n      $('[data-paypal-combination]').val(combination.join('|'));\n      if (typeof ec_sc_in_context !== 'undefined' && ec_sc_in_context) {\n        ECSInContext(sourcePage, combination, vars['qty'], vars['id_product']);\n      } else {\n        $('[data-paypal-payment-form-cart]').submit();\n      }\n      break;\n    case 'cart':\n      if (typeof ec_sc_in_context !== 'undefined' && ec_sc_in_context) {\n        ECSInContext();\n      } else {\n        $('[data-paypal-payment-form-cart]').submit();\n      }\n      break;\n  }\n});\n\nconst EcCheckProductAvailability = (sourcePage, qty=false, productId=false, productIdAttr=false) => {\n  $.ajax({\n    url: sc_init_url,\n    type: 'POST',\n    data: `checkAvailability=1&source_page=${sourcePage}${productId ? `&id_product=${productId}` : ''}${qty ? `&quantity=${qty}` : ''}${productIdAttr ? `&product_attribute=${productIdAttr}` : ''}`,\n    success: (json) => {\n      if (json.success) {\n        $('[data-container-express-checkout]').show();\n      } else {\n        $('[data-container-express-checkout]').hide();\n      }\n    }\n  });\n}\n\nconst ECSInContext = (sourcePage=false, combination=false, qty=false, productId=false) => {\n\n  paypal.checkout.initXO();\n  $.support.cors = true;\n  $.ajax({\n    url: ec_sc_action_url,\n    type: 'GET',\n    data: `getToken=1&source_page=${sourcePage}${productId ? `&id_product=${productId}` : ''}${qty ? `&quantity=${qty}` : ''}${combination ? `&combination=${combination.join('|')}` : ''}`,\n    success: (json) => {\n      if (json.success) {\n        var url = paypal.checkout.urlPrefix + json.token;\n        paypal.checkout.startFlow(url);\n      } else {\n        paypal.checkout.closeFlow();\n        window.location.replace(json.redirect_link);\n      }\n    },\n    error: (responseData) => {\n      alert(`Error in ajax post ${responseData.statusText}`);\n      paypal.checkout.closeFlow();\n    }\n  });\n}\n"],"sourceRoot":""}